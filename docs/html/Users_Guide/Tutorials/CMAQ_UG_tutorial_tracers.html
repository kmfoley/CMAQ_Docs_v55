
<!DOCTYPE html>


<html lang="en" data-content_root="../../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>CMAQ Tutorial &#8212; CMAQ_Documentation 0.2 documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  <!-- 
    this give us a css class that will be invisible only if js is disabled 
  -->
  <noscript>
    <style>
      .pst-js-only { display: none !important; }

    </style>
  </noscript>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../_static/styles/theme.css?digest=26a4bc78f4c0ddb94549" rel="stylesheet" />
<link href="../../_static/styles/pydata-sphinx-theme.css?digest=26a4bc78f4c0ddb94549" rel="stylesheet" />

    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=a746c00c" />
  
  <!-- So that users can add custom icons -->
  <script src="../../_static/scripts/fontawesome.js?digest=26a4bc78f4c0ddb94549"></script>
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../_static/scripts/bootstrap.js?digest=26a4bc78f4c0ddb94549" />
<link rel="preload" as="script" href="../../_static/scripts/pydata-sphinx-theme.js?digest=26a4bc78f4c0ddb94549" />

    <script src="../../_static/documentation_options.js?v=10f1778b"></script>
    <script src="../../_static/doctools.js?v=9bcbadda"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'Users_Guide/Tutorials/CMAQ_UG_tutorial_tracers';</script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  <meta name="docsearch:version" content="" />
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <dialog id="pst-search-dialog">
    
<form class="bd-search d-flex align-items-center"
      action="../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
  </dialog>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
<div class="bd-header__inner bd-page-width">
  <button class="pst-navbar-icon sidebar-toggle primary-toggle" aria-label="Site navigation">
    <span class="fa-solid fa-bars"></span>
  </button>
  
  
  <div class="col-lg-3 navbar-header-items__start">
    
      <div class="navbar-item">

  
    
  

<a class="navbar-brand logo" href="../../index.html">
  
  
  
  
  
  
    <p class="title logo__title">CMAQ_Documentation 0.2 documentation</p>
  
</a></div>
    
  </div>
  
  <div class="col-lg-9 navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item ">
  <a class="nav-link nav-internal" href="../README.html">
         User's Guide
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="README.html">
         Tutorials
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../Developers_Guide/CMAQ_Dev_Guide.html">
         Developer's Guide
  </a>
</li>

  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
        </div>
      
      
        <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
    </div>
  

  
    <button class="pst-navbar-icon sidebar-toggle secondary-toggle" aria-label="On this page">
      <span class="fa-solid fa-outdent"></span>
    </button>
  
</div>

    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
        
      
      <dialog id="pst-primary-sidebar-modal"></dialog>
      <div id="pst-primary-sidebar" class="bd-sidebar-primary bd-sidebar hide-on-wide">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          
          
            <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item ">
  <a class="nav-link nav-internal" href="../README.html">
         User's Guide
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="README.html">
         Tutorials
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../Developers_Guide/CMAQ_Dev_Guide.html">
         Developer's Guide
  </a>
</li>

  </ul>
</nav></div>
          
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
        
      </div>
    
  </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">

<nav aria-label="Breadcrumb" class="d-print-none">
  <ul class="bd-breadcrumbs">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="../../index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    <li class="breadcrumb-item active" aria-current="page"><span class="ellipsis">CMAQ Tutorial</span></li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="cmaq-tutorial">
<h1>CMAQ Tutorial<a class="headerlink" href="#cmaq-tutorial" title="Link to this heading">#</a></h1>
<section id="add-chemically-inert-gas-phase-tracer-species-to-cmaq">
<h2>Add Chemically Inert Gas Phase Tracer Species to CMAQ<a class="headerlink" href="#add-chemically-inert-gas-phase-tracer-species-to-cmaq" title="Link to this heading">#</a></h2>
<p>Purpose: This tutorial will step you through the process of adding chemically inert gas phase tracers to the CMAQ model.  Inert tracers can be used as a development tool to test mass conservation when modifying processes in CMAQ.  They can also be used for exploratory analysis such as studying the persistence or impact of initial and/or boundary conditions on air quality model estimates, e.g., <a class="reference external" href="https://doi.org/10.1016/j.atmosenv.2017.04.009">Hogrefe et al. (2017)</a>, <a class="reference external" href="https://doi.org/10.5194/acp-18-17157-2018">Liu et al. (2018)</a>. Note that inert tracers are not a replacement for source contribution analysis (e.g., <a class="reference internal" href="../CMAQ_UG_ch11_ISAM.html"><span class="std std-doc">CMAQ ISAM</span></a>) that provides an estimate of how much of a chemically reactive modeled pollutant came from specific sources or processes (<a class="reference external" href="https://doi.org/10.1016/j.atmosenv.2015.10.055">Baker et al. (2015)</a>).</p>
<hr class="docutils" />
<p>This tutorial will cover 5 different examples to illustrate how adding tracers to the ICBC and emissions input files are similar and highlight important differences to consider when developing a new application.</p>
<p><strong>The first tracer species O3_BC</strong></p>
<ul class="simple">
<li><p>is defined to have the same molecular weight as ozone</p></li>
<li><p>uses the ozone dry deposition velocity (VD_O3) scaled with a factor of 1 as its surrogate for dry deposition</p></li>
<li><p>uses ozone as its scavenging surrogate scaled with a factor of 1</p></li>
<li><p>will try to obtain its boundary conditions from a CMAQ species named ‘O3’ in the boundary condition files with a scaling factor of 1</p></li>
<li><p>is not mapped to any initial condition, therefore uses default scaling factor of -1</p></li>
<li><p>does not participate in gas-to-aerosol or gas-to-aqueous transformations</p></li>
<li><p>will undergo advection and diffusion</p></li>
<li><p>will be written to the DDEP, WDEP, and CONC output files</p></li>
</ul>
<p><strong>The second tracer species CO_BC</strong></p>
<ul class="simple">
<li><p>is defined to have the same molecular weight as CO</p></li>
<li><p>uses the CO dry deposition velocity (VD_CO) scaled with a factor of 1 as its surrogate for dry deposition</p></li>
<li><p>uses CO as its scavenging surrogate scaled with a factor of 1</p></li>
<li><p>will try to obtain its boundary conditions from a species named ‘CO’ in the boundary condition files with a scaling factor of 1</p></li>
<li><p>is not mapped to any initial condition, therefore uses default scaling factor of -1</p></li>
<li><p>does not participate in gas-to-aerosol or gas-to-aqueous transformations</p></li>
<li><p>will undergo advection and diffusion</p></li>
<li><p>will be written to the DDEP, WDEP, and CONC output files</p></li>
</ul>
<p><strong>The third tracer species O3_IC</strong></p>
<ul class="simple">
<li><p>is defined to have the same molecular weight as ozone</p></li>
<li><p>uses the ozone dry deposition velocity (VD_O3) scaled with a factor of 1 as its surrogate for dry deposition</p></li>
<li><p>uses ozone as its scavenging surrogate scaled with a factor of 1</p></li>
<li><p>will try to obtain its initial conditions from a species named ‘O3’ in the initial condition files with scaling factor of -1</p></li>
<li><p>has no boundary condition specified, therefore uses default scaling factor of -1</p></li>
<li><p>does not participate in gas-to-aerosol or gas-to-aqueous transformations</p></li>
<li><p>will undergo advection and diffusion</p></li>
<li><p>will be written to the DDEP, WDEP, and CONC output files</p></li>
</ul>
<p><strong>The fourth tracer species O3_BC_50PC</strong></p>
<ul class="simple">
<li><p>is defined to have the same molecular weight as ozone</p></li>
<li><p>uses the ozone dry deposition velocity (VD_O3) scaled with a factor of 1 as its surrogate for dry deposition</p></li>
<li><p>uses ozone as its scavenging surrogate scaled with a factor of 1</p></li>
<li><p>will try to obtain its  boundary conditions from a species named ‘O3’ in the boundary condition files with a scaling factor of 0.5</p></li>
<li><p>is not mapped to any boundary condition, therefore uses default scaling factor of -1</p></li>
<li><p>does not participate in gas-to-aerosol or gas-to-aqueous transformations</p></li>
<li><p>will undergo advection and diffusion</p></li>
<li><p>will be written to the DDEP, WDEP, and CONC output files</p></li>
</ul>
<p><strong>The fifth tracer species CO_EMIS</strong></p>
<ul class="simple">
<li><p>is defined to have the same molecular weight as CO</p></li>
<li><p>uses the CO dry deposition velocity (VD_CO) scaled with a factor of 1 as its surrogate for dry deposition</p></li>
<li><p>uses CO as its scavenging surrogate scaled with a factor of 1</p></li>
<li><p>is not mapped to any initial/boundary condition surrogate, therefore uses default scaling factor of -1</p></li>
<li><p>does not participate in gas-to-aerosol or gas-to-aqueous transformations</p></li>
<li><p>will undergo advection and diffusion</p></li>
<li><p>will be written to the DDEP, WDEP, and CONC output files</p></li>
<li><p>see the instructions below for how to map emissions to this tracer species using DESID.</p></li>
</ul>
<p><strong>The last tracer species ICT_50PPB</strong></p>
<ul class="simple">
<li><p>is defined to have a molecular weight of 1 g/mole</p></li>
<li><p>is not mapped to any dry deposition velocity surrogate, i.e. does not undergo dry deposition, therefore uses default scaling factor of -1</p></li>
<li><p>is not mapped to any scavenging surrogate, i.e. does not undergo scavenging , therfore uses default scaling factor of -1</p></li>
<li><p>will try to obtain its initial from a species named ICT_50PPB in the initial condition files</p></li>
<li><p>is not mapped to any boundary condition therefore uses default scaling factor of -1</p></li>
<li><p>does not participate in gas-to-aerosol or gas-to-aqueous transformations</p></li>
<li><p>will undergo advection and diffusion</p></li>
<li><p>will not be written to the DDEP and WDEP output files</p></li>
<li><p>will be written to the CONC output file</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="step-1-create-tracer-namelist">
<h2>STEP 1: Create tracer namelist</strong><a class="headerlink" href="#step-1-create-tracer-namelist" title="Link to this heading">#</a></h2>
<p>Create namelist according to Table 4-2 in the <a class="reference internal" href="../CMAQ_UG_ch04_model_inputs.html#Table4-2"><span class="std std-ref">CMAQ User’s Guide</span></a>. Include one line for each tracer species with the following format (refer to the table below for more information on the abbreviations):</p>
<p><a id=Table3-4></a></p>
<p><strong>Amended from Table 4-2 in the CMAQ User’s Guide</strong></p>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head"><p><strong>Line</strong></p></th>
<th class="head"><p><strong>Column</strong></p></th>
<th class="head"><p><strong>Name</strong></p></th>
<th class="head"><p><strong>Type</strong></p></th>
<th class="head"><p><strong>Description</strong></p></th>
<th class="head"><p><strong>Comments/Options for Syntax</strong>:</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>1</p></td>
<td><p></p></td>
<td><p>File Type</p></td>
<td><p>String</p></td>
<td><p>String to delineate Gas Phase (GC), Aerosol (AE), Non-reactive (NR) and Tracer (TR) species namelist. This section is only applicable for “TR” format files.</p></td>
<td><p>{TR_nml}</p></td>
</tr>
<tr class="row-odd"><td><p>3</p></td>
<td><p></p></td>
<td><p>Header ID</p></td>
<td><p>String</p></td>
<td><p>String to define data structure relating to namelist</p></td>
<td><p>{TR_SPECIES_DATA = }</p></td>
</tr>
<tr class="row-even"><td><p>5</p></td>
<td><p>1</p></td>
<td><p>SPECIES</p></td>
<td><p>String</p></td>
<td><p>CMAQ Species name, i.e. NO, HNO<sub>3</sub>, PAR; dependent on chemical mechanism</p></td>
<td><p>-</p></td>
</tr>
<tr class="row-odd"><td><p></p></td>
<td><p>2</p></td>
<td><p>MOLWT</p></td>
<td><p>Integer</p></td>
<td><p>Species Molecular Weight</p></td>
<td><p>-</p></td>
</tr>
<tr class="row-even"><td><p></p></td>
<td><p>3</p></td>
<td><p>IC</p></td>
<td><p>String</p></td>
<td><p>Initial conditions surrogate species name</p></td>
<td><p>{‘Species name’, ‘ ‘}</p></td>
</tr>
<tr class="row-odd"><td><p></p></td>
<td><p>4</p></td>
<td><p>FAC</p></td>
<td><p>Integer</p></td>
<td><p>Scaling factor for the inital conditions concentration</p></td>
<td><p>{Any integer: default = -1 if IC is not specified}</p></td>
</tr>
<tr class="row-even"><td><p></p></td>
<td><p>5</p></td>
<td><p>BC</p></td>
<td><p>String</p></td>
<td><p>Boundary conditions surrogate species name</p></td>
<td><p>{‘Species name’, ‘ ‘}</p></td>
</tr>
<tr class="row-odd"><td><p></p></td>
<td><p>6</p></td>
<td><p>FAC</p></td>
<td><p>Integer</p></td>
<td><p>Scaling factor for the boundary concentration</p></td>
<td><p>{Any integer: default = -1 if BC is not specified}</p></td>
</tr>
<tr class="row-even"><td><p></p></td>
<td><p>7</p></td>
<td><p>DRYDEP SURR</p></td>
<td><p>String</p></td>
<td><p>Surrogate specie name for dry deposition</p></td>
<td><p>-</p></td>
</tr>
<tr class="row-odd"><td><p></p></td>
<td><p>8</p></td>
<td><p>FAC</p></td>
<td><p>Integer</p></td>
<td><p>Scaling factor for dry deposition velocity</p></td>
<td><p>{Any integer: default = -1 if SURR is not specified}</p></td>
</tr>
<tr class="row-even"><td><p></p></td>
<td><p>9</p></td>
<td><p>WET-SCAV SURR</p></td>
<td><p>String</p></td>
<td><p>Surrograte specie name for wet deposition</p></td>
<td><p>-</p></td>
</tr>
<tr class="row-odd"><td><p></p></td>
<td><p>10</p></td>
<td><p>FAC</p></td>
<td><p>Integer</p></td>
<td><p>Scaling factor for wet scavenging</p></td>
<td><p>{Any integer: default = -1 if SURR is not specified}</p></td>
</tr>
<tr class="row-even"><td><p></p></td>
<td><p>11</p></td>
<td><p>TR2AE SURR</p></td>
<td><p>String</p></td>
<td><p>Surrogate species name for gas-to-aerosol transformation species</p></td>
<td><p>Not currently functional in CMAQ</p></td>
</tr>
<tr class="row-odd"><td><p></p></td>
<td><p>12</p></td>
<td><p>TR2AQ SURR</p></td>
<td><p>String</p></td>
<td><p>Surrogate species name for aqueous phase reactions</p></td>
<td><p>Allows the tracer to participate in aqueous phase chemical reactions</p></td>
</tr>
<tr class="row-even"><td><p></p></td>
<td><p>13</p></td>
<td><p>TRNS</p></td>
<td><p>String</p></td>
<td><p>Transport Switch. *NOTE: Instead of using one column labeled “TRNS” to turn/off both advection and diffusion for a pollutant, two separate columns labeled “ADV” and “DIFF” can be used to switch on/off advection and diffusion separately.</p></td>
<td><p>{YES/NO}</p></td>
</tr>
<tr class="row-odd"><td><p></p></td>
<td><p>14</p></td>
<td><p>DDEP</p></td>
<td><p>String</p></td>
<td><p>Dry deposition output file switch</p></td>
<td><p>{YES/NO}</p></td>
</tr>
<tr class="row-even"><td><p></p></td>
<td><p>15</p></td>
<td><p>WDEP</p></td>
<td><p>Real</p></td>
<td><p>Wet deposition output file switch</p></td>
<td><p>{YES/NO}</p></td>
</tr>
<tr class="row-odd"><td><p></p></td>
<td><p>16</p></td>
<td><p>CONC</p></td>
<td><p>String</p></td>
<td><p>Concentration output file switch</p></td>
<td><p>{YES/NO}</p></td>
</tr>
</tbody>
</table>
</div>
<p>The example namelist file shown below defines six tracer species.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>&amp;TR_nml

TR_SPECIES_DATA =

!SPECIES     ,MOLWT   ,IC           ,IC_FAC         ,BC        ,BC_FAC      ,DEPV       ,DEPV_FAC  ,SCAV     ,SCAV_FAC ,TR2AE      ,TR2AQ ,ADVC  ,DIFF  ,DDEP  ,WDEP  ,CONC 
&#39;O3_BC&#39;      ,48.0    ,&#39;&#39;          ,-1              ,&#39;O3&#39;      , 1          ,&#39;VD_O3&#39;    ,1         ,&#39;O3&#39;     , 1        ,&#39;&#39;        ,&#39;&#39;   ,&#39;YES&#39; ,&#39;YES&#39; ,&#39;YES&#39; ,&#39;YES&#39; ,&#39;YES&#39;,
&#39;CO_BC&#39;      ,28.0    ,&#39;&#39;          ,-1              ,&#39;CO&#39;      , 1          ,&#39;VD_CO&#39;    ,1         ,&#39;CO&#39;     , 1        ,&#39;&#39;        ,&#39;&#39;   ,&#39;YES&#39; ,&#39;YES&#39; ,&#39;YES&#39; ,&#39;YES&#39; ,&#39;YES&#39;, 
&#39;O3_IC&#39;      ,48.0    ,&#39;O3&#39;        , 1              ,&#39;&#39;        ,-1          ,&#39;VD_O3&#39;    ,1         ,&#39;O3&#39;     , 1        ,&#39;&#39;        ,&#39;&#39;   ,&#39;YES&#39; ,&#39;YES&#39; ,&#39;YES&#39; ,&#39;YES&#39; ,&#39;YES&#39;, 
&#39;O3_BC_50PC&#39; ,48.0    ,&#39;&#39;          ,-1              ,&#39;O3&#39;      ,0.5         ,&#39;VD_O3&#39;    ,1         ,&#39;O3&#39;     , 1        ,&#39;&#39;        ,&#39;&#39;   ,&#39;YES&#39; ,&#39;YES&#39; ,&#39;YES&#39; ,&#39;YES&#39; ,&#39;YES&#39;,
&#39;CO_EMIS&#39;    ,28.0    ,&#39;&#39;          ,-1              ,&#39;&#39;        ,-1          ,&#39;VD_CO&#39;    ,1         ,&#39;CO&#39;     , 1        ,&#39;&#39;        ,&#39;&#39;   ,&#39;YES&#39; ,&#39;YES&#39; ,&#39;YES&#39; ,&#39;YES&#39; ,&#39;YES&#39;, 
&#39;ICT_50PPB&#39;  , 1.0    ,&#39;ICT_50PPB&#39; , 1              ,&#39;&#39;        ,-1          ,&#39;&#39;         ,-1        ,         ,-1        ,&#39;&#39;        ,&#39;&#39;   ,&#39;YES&#39; ,&#39;YES&#39; ,&#39;&#39;    ,&#39;&#39;    ,&#39;YES&#39;
/

</pre></div>
</div>
</section>
<section id="step-2-add-tracers-to-desid-configuration-files">
<h2>STEP 2: Add tracers to DESID configuration files<a class="headerlink" href="#step-2-add-tracers-to-desid-configuration-files" title="Link to this heading">#</a></h2>
<p>If the tracer has emissions then it must be included as part of the DESID configuration for CMAQ. If the tracers are only being added to the initial or boundary conditions file then this step is not necessary.</p>
<p>The CO_EMIS tracer is designed to track the fate of CO emissions without any influence from initial or boundary conditions and therefore no IC/BC surrogate was specified and no additional species needs to be added to the initial condition file for this tracer. However, it must be specified in the mechanism-specific CMAQ_Control_DESID file found under CCTM/src/MECHS/<em>{mechanism name}</em> in the CMAQ repository. For example if running the cb6r3_ae7_aq mechanism, edit the CMAQ_Control_DESID_cb6r3_ae7_aq.nml  file to include the following line after the Custom Mapping Examples in the Emissions Scaling Rules section:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>   ! Region      | Stream Label  |Emission | CMAQ-        |Phase/|Scale |Basis |Op
   !  Label      |               |Species  | Species      |Mode  |Factor|      |
   !Tracer
   &#39;EVERYWHERE&#39;  , &#39;ALL&#39;         ,&#39;CO&#39;     ,&#39;CO_EMIS&#39;      ,&#39;GAS&#39;,1.    ,&#39;UNIT&#39;,&#39;a&#39;,
</pre></div>
</div>
</section>
<section id="step-3-add-tracers-to-initial-condition-boundary-condition-and-or-emission-files">
<h2>STEP 3: Add tracers to initial condition, boundary condition, and/or emission files<a class="headerlink" href="#step-3-add-tracers-to-initial-condition-boundary-condition-and-or-emission-files" title="Link to this heading">#</a></h2>
<p>Depending on the desired application, the emission surrogate and IC/BC surrogate defined in the tracer namelist for each tracer need to be added to the corresponding CMAQ input files, i.e. the emissions, initial condition, and/or boundary condition files.</p>
<p>The CO_EMIS tracer defined in STEP1 has an emission surrogate that needs to be mapped in a standard emission file (the first four tracers do not have any emission surrogate while the fifth tracer uses CO as its emission surrogate). The first four tracers have a IC/BC surrogates that are contained in standard initial or boundary condition files, while the last tracer, ICT_50PPB, does not have an IC that is contained in a standard IC file. This section provides the necessary steps to add an emissions surrogate to the emissions file and a sample scripts that add the necessary species to an existing initial condition file.</p>
<p>Note that adding species (if any) to the initial condition file is only necessary for the first day of the simulation while boundary condition and/or emission species (if any) need to be added to the boundary condition and/or emission files for all days of the simulation. Since all tracers defined above will be written to the CGRID file using their names as defined in column 1 of the namelist file, and since the CGRID file will be used to provide initial conditions to CMAQ after the first day of simulation, the tracer species names defined in column 1 were also used as the names of the IC/BC surrogate in column 9 in the sample tracer namelist file for those tracers that use an IC/BC surrogate.</p>
<section id="script-to-add-o3-ic-and-ict-50ppb-to-an-existing-initial-condition-file">
<h3>Script to add O3_IC and ICT_50PPB to an existing initial condition file<a class="headerlink" href="#script-to-add-o3-ic-and-ict-50ppb-to-an-existing-initial-condition-file" title="Link to this heading">#</a></h3>
<p>The run script below uses the <a class="reference internal" href="#../../../POST/combine"><span class="xref myst"><code class="docutils literal notranslate"><span class="pre">combine</span></code></span></a> program to add species ICT_50PB to an existing initial condition file. The ICT_50PPB specie is set to a constant mixing ratio of 0.05 ppm for all grid cells. From the CMAQ Home directory run the following commands to build the combine executable:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>cd $CMAQ_HOME/POST/combine/scripts
./bldit_combine.csh [compiler] [version] |&amp; tee build_combine.log
</pre></div>
</div>
<p>After the combine executable is successfully built, create the following run script in the same folder:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>#!/bin/csh

#&gt; Location of CMAQv5.2 benchmark case
 set CMAQ_DATA = $CMAQ_HOME/data
 set OUTDIR = $CMAQ_DATA/SE52BENCH

#&gt; Set the working directory
 set BASE  = $cwd      

 cd $BASE; date; set timestamp; echo &quot; &quot;; set echo

#&gt; Timestep run parameters.
 set YEAR     = 2011
 set MONTH    = 07
 set DAY      = 01 
 set MET_YEAR = 11

#&gt; Use GENSPEC switch to generate a new specdef file (does not generate output file).

 setenv GENSPEC Y

#&gt; Define name of new species definition file to be created

 setenv SPECIES_DEF ${OUTDIR}/SpecDef_CGRID_SE52BENCH.txt

 if (-e ${SPECIES_DEF}) &#39;rm&#39; ${SPECIES_DEF}


#&gt; Define name of input and output files needed for combine program.

   setenv INFILE1 ${CMAQ_DATA}/SE52BENCH/ref_output/cctm/CCTM_CGRID_v52_intel_SE52BENCH_$YEAR$MONTH$DAY.nc

   setenv OUTFILE ${OUTDIR}/SE52BENCH/CCTM_CGRID_v52_intel_SE52BENCH_added_tracer_$YEAR$MONTH$DAY.nc


#&gt; Executable call:
#&gt;
#&gt; In this first call, we only generate the specdef file that contains all the
#&gt; species contained in the existing boundary condition file. OUTFILE is not
#&gt; created

   /usr/bin/time $BINDIR/combine.${VRSN}.exe

#&gt;
#&gt; define the tracer species to be added to the boundary condition file using the
#&gt; &quot;combine&quot; specdef syntax
#&gt;

   echo &quot;O3_IC            ,ppmV            ,O3[1], Variable O3_IC&quot;            &gt;! ${OUTDIR}/species_def_tracer.txt
   echo &quot;ICT_50PPB        ,ppmV            ,0.05, Variable ICT_50PPB&quot;         &gt;&gt; ${OUTDIR}/species_def_tracer.txt

#&gt;
#&gt; concatenate the specdep file containing the existing species and the file
#&gt; containing the additional tracer species
#&gt;

cat ${SPECIES_DEF} ${OUTDIR}/species_def_tracer.txt &gt;! ${OUTDIR}/species_CGRID_D51a_12CalnexBench_added_tracer.txt

#&gt; Redefine the name of specdef file
 setenv SPECIES_DEF ${OUTDIR}/species_CGRID_D51a_12CalnexBench_added_tracer.txt

#&gt; Reset the GENSPEC switch to not generate a new specdef file but to generate an output file
 setenv GENSPEC N

#&gt; Executable call:
#&gt;
#&gt; In this second call, the modified specdef file is used
#&gt; and an output file containing all the original species
#&gt; as well as the added tracer species is created

   /usr/bin/time $BINDIR/combine.${VRSN}.exe

#&gt;
#&gt; Remove the temporary file with the tracer definitions
#&gt;

&#39;rm&#39; ${OUTDIR}/SpecDef_tracer.txt

 date
 exit()

</pre></div>
</div>
<p>Once the script is made, execute the run script with the following commands:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">./</span><span class="n">run</span><span class="o">.</span><span class="p">{</span><span class="n">script_name</span><span class="p">}</span><span class="o">.</span><span class="n">csh</span> <span class="o">|&amp;</span> <span class="n">tee</span> <span class="n">run</span><span class="o">.</span><span class="n">combine</span><span class="o">.</span><span class="n">log</span>
</pre></div>
</div>
<p>Further details on how to change and customize the emissions control file to the users specification outside the scope of this tutorial can be found in the <a class="reference internal" href="CMAQ_UG_tutorial_emissions.html"><span class="std std-doc">emissions tutorial</span></a>.</p>
</section>
</section>
<section id="step-4-modify-cmaq-run-script">
<h2>STEP 4: Modify CMAQ run script</strong><a class="headerlink" href="#step-4-modify-cmaq-run-script" title="Link to this heading">#</a></h2>
<p>In the CMAQ run script, replace the default tracer namelist file <code class="docutils literal notranslate"><span class="pre">Species_Table_TR_0.nml</span></code> with the custom tracer namelist file created in STEP 1 and new DESID namelist file created in STEP 2 (if needed). Also replace the original input files (initial conditions, boundary conditions, and/or emissions) with the modified input files created in Step 3.</p>
</section>
</section>


                </article>
              
              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
</div>
                </footer>
              
            </div>
            
            
              
                <dialog id="pst-secondary-sidebar-modal"></dialog>
                <div id="pst-secondary-sidebar" class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
<div
    id="pst-page-navigation-heading-2"
    class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
  </div>
  <nav class="bd-toc-nav page-toc" aria-labelledby="pst-page-navigation-heading-2">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#add-chemically-inert-gas-phase-tracer-species-to-cmaq">Add Chemically Inert Gas Phase Tracer Species to CMAQ</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#step-1-create-tracer-namelist">STEP 1: Create tracer namelist</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#step-2-add-tracers-to-desid-configuration-files">STEP 2: Add tracers to DESID configuration files</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#step-3-add-tracers-to-initial-condition-boundary-condition-and-or-emission-files">STEP 3: Add tracers to initial condition, boundary condition, and/or emission files</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#script-to-add-o3-ic-and-ict-50ppb-to-an-existing-initial-condition-file">Script to add O3_IC and ICT_50PPB to an existing initial condition file</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#step-4-modify-cmaq-run-script">STEP 4: Modify CMAQ run script</a></li>
</ul>
  </nav></div>

  <div class="sidebar-secondary-item">

  <div class="tocsection sourcelink">
    <a href="../../_sources/Users_Guide/Tutorials/CMAQ_UG_tutorial_tracers.md.txt">
      <i class="fa-solid fa-file-lines"></i> Show Source
    </a>
  </div>
</div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script defer src="../../_static/scripts/bootstrap.js?digest=26a4bc78f4c0ddb94549"></script>
<script defer src="../../_static/scripts/pydata-sphinx-theme.js?digest=26a4bc78f4c0ddb94549"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item">

  <p class="copyright">
    
      © Copyright 2024, CMAQ Developers.
      <br/>
    
  </p>
</div>
      
        <div class="footer-item">

  <p class="sphinx-version">
    Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 8.1.3.
    <br/>
  </p>
</div>
      
    </div>
  
  
  
    <div class="footer-items__end">
      
        <div class="footer-item">
<p class="theme-version">
  Built with the <a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">PyData Sphinx Theme</a> 0.16.0.
</p></div>
      
    </div>
  
</div>

  </footer>
  </body>
</html>